import random
from collections import defaultdict

IDS = list('ğŸ˜€ğŸ˜ğŸ˜‚ğŸ¤£ğŸ˜ƒğŸ˜„ğŸ˜…ğŸ˜†ğŸ˜‰ğŸ˜ŠğŸ˜‹ğŸ˜ğŸ˜ğŸ˜˜ğŸ˜—ğŸ˜™ğŸ˜šâ˜ºï¸ğŸ™‚ğŸ¤—ğŸ¤©ğŸ¤”ğŸ¤¨ğŸ˜ğŸ˜‘ğŸ˜¶ğŸ™„ğŸ˜ğŸ˜£ğŸ˜¥ğŸ˜®ğŸ¤ğŸ˜¯ğŸ˜ªğŸ˜«ğŸ˜´ğŸ˜ŒğŸ˜›ğŸ˜œğŸ˜ğŸ¤¤ğŸ˜’ğŸ˜“ğŸ˜”ğŸ˜•ğŸ™ƒğŸ¤‘ğŸ˜²â˜¹ï¸ğŸ™ğŸ˜–ğŸ˜ğŸ˜ŸğŸ˜¤ğŸ˜¢ğŸ˜­ğŸ˜¦ğŸ˜§ğŸ˜¨ğŸ˜©ğŸ¤¯ğŸ˜¬ğŸ˜°ğŸ˜±ğŸ˜³ğŸ¤ªğŸ˜µğŸ˜¡ğŸ˜ ğŸ¤¬ğŸ˜·ğŸ¤’ğŸ¤•ğŸ¤¢ğŸ¤®ğŸ¤§ğŸ˜‡ğŸ¤ ğŸ¤¡ğŸ¤¥ğŸ¤«ğŸ¤­ğŸ§ğŸ¤“ğŸ˜ˆğŸ‘¿ğŸ‘¹ğŸ‘ºğŸ’€ğŸ‘»ğŸ‘½ğŸ¤–ğŸ’©ğŸ˜ºğŸ˜¸ğŸ˜¹ğŸ˜»ğŸ˜¼ğŸ˜½ğŸ™€ğŸ˜¿ğŸ˜¾ğŸ‘¶ğŸ‘§ğŸ§’ğŸ‘¦ğŸ‘©ğŸ§‘ğŸ‘¨ğŸ‘µğŸ§“ğŸ‘´ğŸ‘²ğŸ‘³â€â™€ï¸ğŸ‘³â€â™‚ï¸ğŸ§•ğŸ§”ğŸ‘±â€â™‚ï¸ğŸ‘±â€â™€ï¸ğŸ‘¨â€ğŸ‘©â€ğŸ‘¨â€ğŸ‘©â€ğŸ‘¨â€ğŸ‘©â€ğŸ‘¨â€ğŸ‘©â€ğŸ‘®â€â™€ï¸ğŸ‘®â€â™‚ï¸ğŸ‘·â€â™€ï¸ğŸ‘·â€â™‚ï¸ğŸ’‚â€â™€ï¸ğŸ’‚â€â™‚ï¸ğŸ•µï¸â€â™€ï¸ğŸ•µï¸â€â™‚ï¸ğŸ‘©â€âš•ï¸ğŸ‘¨â€âš•ï¸ğŸ‘©â€ğŸŒ¾ğŸ‘¨â€ğŸŒ¾ğŸ‘©â€ğŸ³ğŸ‘¨â€ğŸ³ğŸ‘©â€ğŸ“ğŸ‘¨â€ğŸ“ğŸ‘©â€ğŸ¤ğŸ‘¨â€ğŸ¤ğŸ‘©â€ğŸ«ğŸ‘¨â€ğŸ«ğŸ‘©â€ğŸ­ğŸ‘¨â€ğŸ­ğŸ‘©â€ğŸ’»ğŸ‘¨â€ğŸ’»ğŸ‘©â€ğŸ’¼ğŸ‘¨â€ğŸ’¼ğŸ‘©â€ğŸ”§ğŸ‘¨â€ğŸ”§ğŸ‘©â€ğŸ”¬ğŸ‘¨â€ğŸ”¬ğŸ‘©â€ğŸ¨ğŸ‘¨â€ğŸ¨ğŸ‘©â€ğŸš’ğŸ‘¨â€ğŸš’ğŸ‘©â€âœˆï¸ğŸ‘¨â€âœˆï¸ğŸ‘©â€ğŸš€ğŸ‘¨â€ğŸš€ğŸ‘©â€âš–ï¸ğŸ‘¨â€âš–ï¸ğŸ‘°ğŸ¤µğŸ‘¸ğŸ¤´ğŸ¤¶ğŸ…ğŸ§™â€â™€ï¸ğŸ§™â€â™‚ï¸ğŸ§â€â™€ï¸ğŸ§â€â™‚ï¸ğŸ§›â€â™€ï¸ğŸ§›â€â™‚ï¸ğŸ§Ÿâ€â™€ï¸ğŸ§Ÿâ€â™‚ï¸ğŸ§â€â™€ï¸ğŸ§â€â™‚ï¸ğŸ§œâ€â™€ï¸ğŸ§œâ€â™‚ï¸ğŸ§šâ€â™€ï¸ğŸ§šâ€â™‚ï¸ğŸ‘¼ğŸ¤°ğŸ¤±ğŸ™‡â€â™€ï¸ğŸ™‡â€â™‚ï¸ğŸ’â€â™€ï¸ğŸ’â€â™‚ï¸ğŸ™…â€â™€ï¸ğŸ™…â€â™‚ï¸ğŸ™†â€â™€ï¸ğŸ™†â€â™‚ï¸ğŸ™‹â€â™€ï¸ğŸ™‹â€â™‚ï¸ğŸ¤¦â€â™€ï¸ğŸ¤¦â€â™‚ï¸ğŸ¤·â€â™€ï¸ğŸ¤·â€â™‚ï¸ğŸ™â€â™€ï¸ğŸ™â€â™‚ï¸ğŸ™â€â™€ï¸ğŸ™â€â™‚ï¸ğŸ’‡â€â™€ï¸ğŸ’‡â€â™‚ï¸ğŸ’†â€â™€ï¸ğŸ’†â€â™‚ï¸ğŸ§–â€â™€ï¸ğŸ§–â€â™‚ï¸ğŸ’…ğŸ¤³ğŸ’ƒğŸ•ºğŸ‘¯â€â™€ï¸ğŸ‘¯â€â™‚ï¸ğŸ•´ğŸš¶â€â™€ï¸ğŸš¶â€â™‚ï¸ğŸƒâ€â™€ï¸ğŸƒâ€â™‚ï¸ğŸ‘«ğŸ‘­ğŸ‘¬ğŸ’‘ğŸ‘©â€â¤ï¸â€ğŸ‘©ğŸ‘¨â€â¤ï¸â€ğŸ‘¨ğŸ’ğŸ‘©â€â¤ï¸â€ğŸ’‹â€ğŸ‘©ğŸ‘¨â€â¤ï¸â€ğŸ’‹â€ğŸ‘¨ğŸ‘ªğŸ‘¨â€ğŸ‘©â€ğŸ‘§ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ğŸ‘¨â€ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘§ğŸ‘©â€ğŸ‘©â€ğŸ‘¦ğŸ‘©â€ğŸ‘©â€ğŸ‘§ğŸ‘©â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ğŸ‘©â€ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦ğŸ‘©â€ğŸ‘©â€ğŸ‘§â€ğŸ‘§ğŸ‘¨â€ğŸ‘¨â€ğŸ‘¦ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘¦ğŸ‘¨â€ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘§ğŸ‘©â€ğŸ‘¦ğŸ‘©â€ğŸ‘§ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦ğŸ‘©â€ğŸ‘§â€ğŸ‘§ğŸ‘¨â€ğŸ‘¦ğŸ‘¨â€ğŸ‘§ğŸ‘¨â€ğŸ‘§â€ğŸ‘¦ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦ğŸ‘¨â€ğŸ‘§â€ğŸ‘§ğŸ¤²ğŸ‘ğŸ™ŒğŸ‘ğŸ¤ğŸ‘ğŸ‘ğŸ‘ŠâœŠğŸ¤›ğŸ¤œğŸ¤âœŒï¸ğŸ¤ŸğŸ¤˜ğŸ‘ŒğŸ‘ˆğŸ‘‰ğŸ‘†ğŸ‘‡â˜ï¸âœ‹ğŸ¤šğŸ–ğŸ––ğŸ‘‹ğŸ¤™ğŸ’ªğŸ–•âœï¸ğŸ™ğŸ’ğŸ’„ğŸ’‹ğŸ‘„ğŸ‘…ğŸ‘‚ğŸ‘ƒğŸ‘£ğŸ‘ğŸ‘€ğŸ§ ğŸ—£ğŸ‘¤ğŸ‘¥ğŸ§¥ğŸ‘šğŸ‘•ğŸ‘–ğŸ‘”ğŸ‘—ğŸ‘™ğŸ‘˜ğŸ‘ ğŸ‘¡ğŸ‘¢ğŸ‘ğŸ‘ŸğŸ§¦ğŸ§¤ğŸ§£ğŸ©ğŸ§¢ğŸ‘’ğŸ“â›‘ğŸ‘‘ğŸ‘ğŸ‘›ğŸ‘œğŸ’¼ğŸ’ğŸ‘“ğŸ•¶ğŸŒ‚ğŸ¶ğŸ±ğŸ­ğŸ¹ğŸ°ğŸ¦ŠğŸ»ğŸ¼ğŸ¨ğŸ¯ğŸ¦ğŸ®ğŸ·ğŸ½ğŸ¸ğŸµğŸ™ˆğŸ™‰ğŸ™ŠğŸ’ğŸ”ğŸ§ğŸ¦ğŸ¤ğŸ£ğŸ¥ğŸ¦†ğŸ¦…ğŸ¦‰ğŸ¦‡ğŸºğŸ—ğŸ´ğŸ¦„ğŸğŸ›ğŸ¦‹ğŸŒğŸšğŸğŸœğŸ¦—ğŸ•·ğŸ•¸ğŸ¦‚ğŸ¢ğŸğŸ¦ğŸ¦–ğŸ¦•ğŸ™ğŸ¦‘ğŸ¦ğŸ¦€ğŸ¡ğŸ ğŸŸğŸ¬ğŸ³ğŸ‹ğŸ¦ˆğŸŠğŸ…ğŸ†ğŸ¦“ğŸ¦ğŸ˜ğŸ¦ğŸªğŸ«ğŸ¦’ğŸƒğŸ‚ğŸ„ğŸğŸ–ğŸğŸ‘ğŸğŸ¦ŒğŸ•ğŸ©ğŸˆğŸ“ğŸ¦ƒğŸ•ŠğŸ‡ğŸğŸ€ğŸ¿ğŸ¦”ğŸ¾ğŸ‰ğŸ²ğŸŒµğŸ„ğŸŒ²ğŸŒ³ğŸŒ´ğŸŒ±ğŸŒ¿â˜˜ï¸ğŸ€ğŸğŸ‹ğŸƒğŸ‚ğŸğŸ„ğŸŒ¾ğŸ’ğŸŒ·ğŸŒ¹ğŸ¥€ğŸŒºğŸŒ¸ğŸŒ¼ğŸŒ»ğŸŒğŸŒğŸŒ›ğŸŒœğŸŒšğŸŒ•ğŸŒ–ğŸŒ—ğŸŒ˜ğŸŒ‘ğŸŒ’ğŸŒ“ğŸŒ”ğŸŒ™ğŸŒğŸŒğŸŒğŸ’«â­ï¸ğŸŒŸâœ¨âš¡ï¸â˜„ï¸ğŸ’¥ğŸ”¥ğŸŒªğŸŒˆâ˜€ï¸ğŸŒ¤â›…ï¸ğŸŒ¥â˜ï¸ğŸŒ¦ğŸŒ§â›ˆğŸŒ©ğŸŒ¨â„ï¸â˜ƒï¸â›„ï¸ğŸŒ¬ğŸ’¨ğŸ’§ğŸ’¦â˜”ï¸â˜‚ï¸ğŸŒŠğŸğŸğŸğŸŠğŸ‹ğŸŒğŸ‰ğŸ‡ğŸ“ğŸˆğŸ’ğŸ‘ğŸğŸ¥¥ğŸ¥ğŸ…ğŸ†ğŸ¥‘ğŸ¥¦ğŸ¥’ğŸŒ¶ğŸŒ½ğŸ¥•ğŸ¥”ğŸ ğŸ¥ğŸğŸ¥–ğŸ¥¨ğŸ§€ğŸ¥šğŸ³ğŸ¥ğŸ¥“ğŸ¥©ğŸ—ğŸ–ğŸŒ­ğŸ”ğŸŸğŸ•ğŸ¥ªğŸ¥™ğŸŒ®ğŸŒ¯ğŸ¥—ğŸ¥˜ğŸ¥«ğŸğŸœğŸ²ğŸ›ğŸ£ğŸ±ğŸ¥ŸğŸ¤ğŸ™ğŸšğŸ˜ğŸ¥ğŸ¥ ğŸ¢ğŸ¡ğŸ§ğŸ¨ğŸ¦ğŸ¥§ğŸ°ğŸ‚ğŸ®ğŸ­ğŸ¬ğŸ«ğŸ¿ğŸ©ğŸªğŸŒ°ğŸ¥œğŸ¯ğŸ¥›ğŸ¼â˜•ï¸ğŸµğŸ¥¤ğŸ¶ğŸºğŸ»ğŸ¥‚ğŸ·ğŸ¥ƒğŸ¸ğŸ¹ğŸ¾ğŸ¥„ğŸ´ğŸ½ğŸ¥£ğŸ¥¡ğŸ¥¢ğŸš—ğŸš•ğŸš™ğŸšŒğŸšğŸğŸš“ğŸš‘ğŸš’ğŸšğŸššğŸš›ğŸšœğŸ›´ğŸš²ğŸ›µğŸğŸš¨ğŸš”ğŸšğŸš˜ğŸš–ğŸš¡ğŸš ğŸšŸğŸšƒğŸš‹ğŸšğŸšğŸš„ğŸš…ğŸšˆğŸš‚ğŸš†ğŸš‡ğŸšŠğŸš‰âœˆï¸ğŸ›«ğŸ›¬ğŸ›©ğŸ’ºğŸ›°ğŸš€ğŸ›¸ğŸšğŸ›¶â›µï¸ğŸš¤ğŸ›¥ğŸ›³â›´ğŸš¢âš“ï¸â›½ï¸ğŸš§ğŸš¦ğŸš¥ğŸšğŸ—ºğŸ—¿ğŸ—½ğŸ—¼ğŸ°ğŸ¯ğŸŸğŸ¡ğŸ¢ğŸ â›²ï¸â›±ğŸ–ğŸğŸœğŸŒ‹â›°ğŸ”ğŸ—»ğŸ•â›ºï¸ğŸ ğŸ¡ğŸ˜ğŸšğŸ—ğŸ­ğŸ¢ğŸ¬ğŸ£ğŸ¤ğŸ¥ğŸ¦ğŸ¨ğŸªğŸ«ğŸ©ğŸ’’ğŸ›â›ªï¸ğŸ•ŒğŸ•ğŸ•‹â›©')
random.shuffle(IDS)



def lines(filename):
    with open(filename, 'r') as f:
        for line in f:
            yield line.strip()

def parse_coordinate(line):
    return tuple(int(i) for i in line.split(', '))


CONFLICT = ' '


def to_id(i):
    return IDS[i]


coordinates = [parse_coordinate(line) for line in lines('day6/input.txt')]


assigned_squares = dict([(coordinate, to_id(i)) for (i, coordinate) in enumerate(coordinates)])


def neighbors(coord):
    x, y = coord
    return [(x-1, y), (x + 1, y), (x, y - 1), (x, y + 1)]



def limits(coordinates):
    min_x = min([x for (x, y) in coordinates])
    max_x = max([x for (x, y) in coordinates])
    min_y = min([y for (x, y) in coordinates])
    max_y = max([y for (x, y) in coordinates])
    return min_x, max_x, min_y, max_y


def within_limits(neighbor, lims):
    x, y = neighbor
    min_x, max_x, min_y, max_y = lims
    return x >= min_x and x <= max_x and y >= min_y and y <= max_y


infinite = set()

def next_frontier(all_assigned_squares, old_frontier):
    lims = limits(all_assigned_squares.keys())

    new_frontier = {}
    for square in old_frontier:
        if all_assigned_squares[square] != CONFLICT:
            id_to_assign = all_assigned_squares[square]
            for neighbor in neighbors(square):
                if not within_limits(neighbor, lims):
                    infinite.add(id_to_assign)
                elif neighbor not in all_assigned_squares:
                    if neighbor in new_frontier and new_frontier[neighbor] != id_to_assign:
                        new_frontier[neighbor] = CONFLICT
                    else:
                        new_frontier[neighbor] = id_to_assign
    return new_frontier


def print_map(assigned_squares):
    min_x, max_x, min_y, max_y = limits(assigned_squares.keys())
    for x in range(min_x, max_x + 1):
        print(*[(assigned_squares[(x, y)] if (x,y) in assigned_squares else 'Â·') for y in range(min_y, max_y + 1)], sep='')


#start = {(2, 2): 'A', (5, 5): 'B', (10, 20): 'C'}
start = assigned_squares


board = start
front = board.keys()
while True:
    #print_map(board)
    front = next_frontier(board, front)
    if len(front) == 0:
        break
    board.update(front)
    #print()

print_map(board)

counts = defaultdict(int)
for k, v in board.items():
    if v not in infinite:
        counts[v] += 1

print(max(counts.values()))

